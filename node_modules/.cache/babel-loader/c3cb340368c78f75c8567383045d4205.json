{"remainingRequest":"C:\\Users\\datoyacx\\ba-ka\\ah0-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\datoyacx\\ba-ka\\ah0-web\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\datoyacx\\ba-ka\\ah0-web\\src\\auth\\index.js","dependencies":[{"path":"C:\\Users\\datoyacx\\ba-ka\\ah0-web\\src\\auth\\index.js","mtime":1590170551853},{"path":"C:\\Users\\datoyacx\\ba-ka\\ah0-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\datoyacx\\ba-ka\\ah0-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\datoyacx\\ba-ka\\ah0-web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJzsgLy8gVVJMIGFuZCBlbmRwb2ludCBjb25zdGFudHMKCnZhciBBUElfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MjAwMC8nOwp2YXIgTE9HSU5fVVJMID0gQVBJX1VSTCArICd1c2VyL2F1dGgvbG9naW4nOwp2YXIgU0lHTlVQX1VSTCA9IEFQSV9VUkwgKyAndXNlci9hdXRoL3JlZ2lzdGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIC8vIFVzZXIgb2JqZWN0IHdpbGwgbGV0IHVzIGNoZWNrIGF1dGhlbnRpY2F0aW9uIHN0YXR1cwogIHVzZXI6IHsKICAgIGF1dGhlbnRpY2F0ZWQ6IGZhbHNlCiAgfSwKICAvLyBTZW5kIGEgcmVxdWVzdCB0byB0aGUgbG9naW4gVVJMIGFuZCBzYXZlIHRoZSByZXR1cm5lZCBKV1QKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgY3JlZHMsIHJlZGlyZWN0KSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGNvbnRleHQuJGh0dHAucG9zdChMT0dJTl9VUkwsIGNyZWRzLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRfdG9rZW4nLCBkYXRhLmlkX3Rva2VuKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc190b2tlbicsIGRhdGEuYWNjZXNzX3Rva2VuKTsKICAgICAgX3RoaXMudXNlci5hdXRoZW50aWNhdGVkID0gdHJ1ZTsgLy8gUmVkaXJlY3QgdG8gYSBzcGVjaWZpZWQgcm91dGUKCiAgICAgIGlmIChyZWRpcmVjdCkgewogICAgICAgIHJvdXRlci5nbyhyZWRpcmVjdCk7CiAgICAgIH0KICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29udGV4dC5lcnJvciA9IGVycjsKICAgIH0pOwogIH0sCiAgc2lnbnVwOiBmdW5jdGlvbiBzaWdudXAoY29udGV4dCwgY3JlZHMsIHJlZGlyZWN0KSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBjb250ZXh0LiRodHRwLnBvc3QoU0lHTlVQX1VSTCwgY3JlZHMsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZF90b2tlbicsIGRhdGEuaWRfdG9rZW4pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzX3Rva2VuJywgZGF0YS5hY2Nlc3NfdG9rZW4pOwogICAgICBfdGhpczIudXNlci5hdXRoZW50aWNhdGVkID0gdHJ1ZTsKCiAgICAgIGlmIChyZWRpcmVjdCkgewogICAgICAgIHJvdXRlci5nbyhyZWRpcmVjdCk7CiAgICAgIH0KICAgIH0pLmVycm9yKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29udGV4dC5lcnJvciA9IGVycjsKICAgIH0pOwogIH0sCiAgLy8gVG8gbG9nIG91dCwgd2UganVzdCBuZWVkIHRvIHJlbW92ZSB0aGUgdG9rZW4KICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpZF90b2tlbicpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjY2Vzc190b2tlbicpOwogICAgdGhpcy51c2VyLmF1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICB9LAogIGNoZWNrQXV0aDogZnVuY3Rpb24gY2hlY2tBdXRoKCkgewogICAgdmFyIGp3dCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZF90b2tlbicpOwoKICAgIGlmIChqd3QpIHsKICAgICAgdGhpcy51c2VyLmF1dGhlbnRpY2F0ZWQgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy51c2VyLmF1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgIH0KICB9LAogIC8vIFRoZSBvYmplY3QgdG8gYmUgcGFzc2VkIGFzIGEgaGVhZGVyIGZvciBhdXRoZW50aWNhdGVkIHJlcXVlc3RzCiAgZ2V0QXV0aEhlYWRlcjogZnVuY3Rpb24gZ2V0QXV0aEhlYWRlcigpIHsKICAgIHJldHVybiB7CiAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc190b2tlbicpCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["C:/Users/datoyacx/ba-ka/ah0-web/src/auth/index.js"],"names":["router","API_URL","LOGIN_URL","SIGNUP_URL","user","authenticated","login","context","creds","redirect","$http","post","data","localStorage","setItem","id_token","access_token","go","error","err","signup","logout","removeItem","checkAuth","jwt","getItem","getAuthHeader"],"mappings":"AAAA,SAAQA,MAAR,QAAqB,WAArB,C,CAEA;;AACA,IAAMC,OAAO,GAAG,wBAAhB;AACA,IAAMC,SAAS,GAAGD,OAAO,GAAG,iBAA5B;AACA,IAAME,UAAU,GAAGF,OAAO,GAAG,oBAA7B;AAEA,eAAe;AAEb;AACAG,EAAAA,IAAI,EAAE;AACJC,IAAAA,aAAa,EAAE;AADX,GAHO;AAOb;AACAC,EAAAA,KARa,iBAQPC,OARO,EAQEC,KARF,EAQSC,QART,EAQmB;AAAA;;AAC9BF,IAAAA,OAAO,CAACG,KAAR,CAAcC,IAAd,CAAmBT,SAAnB,EAA8BM,KAA9B,EAAqC,UAACI,IAAD,EAAU;AAC7CC,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,IAAI,CAACG,QAAtC;AACAF,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,IAAI,CAACI,YAA1C;AAEA,MAAA,KAAI,CAACZ,IAAL,CAAUC,aAAV,GAA0B,IAA1B,CAJ6C,CAM7C;;AACA,UAAGI,QAAH,EAAa;AACXT,QAAAA,MAAM,CAACiB,EAAP,CAAUR,QAAV;AACD;AAEF,KAXD,EAWGS,KAXH,CAWS,UAACC,GAAD,EAAS;AAChBZ,MAAAA,OAAO,CAACW,KAAR,GAAgBC,GAAhB;AACD,KAbD;AAcD,GAvBY;AAyBbC,EAAAA,MAzBa,kBAyBNb,OAzBM,EAyBGC,KAzBH,EAyBUC,QAzBV,EAyBoB;AAAA;;AAC/BF,IAAAA,OAAO,CAACG,KAAR,CAAcC,IAAd,CAAmBR,UAAnB,EAA+BK,KAA/B,EAAsC,UAACI,IAAD,EAAU;AAC9CC,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,IAAI,CAACG,QAAtC;AACAF,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,IAAI,CAACI,YAA1C;AAEA,MAAA,MAAI,CAACZ,IAAL,CAAUC,aAAV,GAA0B,IAA1B;;AAEA,UAAGI,QAAH,EAAa;AACXT,QAAAA,MAAM,CAACiB,EAAP,CAAUR,QAAV;AACD;AAEF,KAVD,EAUGS,KAVH,CAUS,UAACC,GAAD,EAAS;AAChBZ,MAAAA,OAAO,CAACW,KAAR,GAAgBC,GAAhB;AACD,KAZD;AAaD,GAvCY;AAyCb;AACAE,EAAAA,MA1Ca,oBA0CJ;AACPR,IAAAA,YAAY,CAACS,UAAb,CAAwB,UAAxB;AACAT,IAAAA,YAAY,CAACS,UAAb,CAAwB,cAAxB;AACA,SAAKlB,IAAL,CAAUC,aAAV,GAA0B,KAA1B;AACD,GA9CY;AAgDbkB,EAAAA,SAhDa,uBAgDD;AACV,QAAIC,GAAG,GAAGX,YAAY,CAACY,OAAb,CAAqB,UAArB,CAAV;;AACA,QAAGD,GAAH,EAAQ;AACN,WAAKpB,IAAL,CAAUC,aAAV,GAA0B,IAA1B;AACD,KAFD,MAGK;AACH,WAAKD,IAAL,CAAUC,aAAV,GAA0B,KAA1B;AACD;AACF,GAxDY;AA0Db;AACAqB,EAAAA,aA3Da,2BA2DG;AACd,WAAO;AACL,uBAAiB,YAAYb,YAAY,CAACY,OAAb,CAAqB,cAArB;AADxB,KAAP;AAGD;AA/DY,CAAf","sourcesContent":["import {router} from '../router'\r\n\r\n// URL and endpoint constants\r\nconst API_URL = 'http://localhost:2000/'\r\nconst LOGIN_URL = API_URL + 'user/auth/login'\r\nconst SIGNUP_URL = API_URL + 'user/auth/register'\r\n\r\nexport default {\r\n\r\n  // User object will let us check authentication status\r\n  user: {\r\n    authenticated: false\r\n  },\r\n\r\n  // Send a request to the login URL and save the returned JWT\r\n  login(context, creds, redirect) {\r\n    context.$http.post(LOGIN_URL, creds, (data) => {\r\n      localStorage.setItem('id_token', data.id_token)\r\n      localStorage.setItem('access_token', data.access_token)\r\n\r\n      this.user.authenticated = true\r\n\r\n      // Redirect to a specified route\r\n      if(redirect) {\r\n        router.go(redirect)        \r\n      }\r\n\r\n    }).error((err) => {\r\n      context.error = err\r\n    })\r\n  },\r\n\r\n  signup(context, creds, redirect) {\r\n    context.$http.post(SIGNUP_URL, creds, (data) => {\r\n      localStorage.setItem('id_token', data.id_token)\r\n      localStorage.setItem('access_token', data.access_token)\r\n\r\n      this.user.authenticated = true\r\n\r\n      if(redirect) {\r\n        router.go(redirect)        \r\n      }\r\n\r\n    }).error((err) => {\r\n      context.error = err\r\n    })\r\n  },\r\n\r\n  // To log out, we just need to remove the token\r\n  logout() {\r\n    localStorage.removeItem('id_token')\r\n    localStorage.removeItem('access_token')\r\n    this.user.authenticated = false\r\n  },\r\n\r\n  checkAuth() {\r\n    var jwt = localStorage.getItem('id_token')\r\n    if(jwt) {\r\n      this.user.authenticated = true\r\n    }\r\n    else {\r\n      this.user.authenticated = false      \r\n    }\r\n  },\r\n\r\n  // The object to be passed as a header for authenticated requests\r\n  getAuthHeader() {\r\n    return {\r\n      'Authorization': 'Bearer ' + localStorage.getItem('access_token')\r\n    }\r\n  }\r\n}"]}]}